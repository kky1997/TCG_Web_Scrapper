# Dockerfile
FROM node:20

WORKDIR /app

# Copy package.json files
COPY backend/package*.json ./backend/
COPY frontend/package*.json ./frontend/

# Install dependencies
RUN cd backend && npm install
RUN cd ../frontend && npm install

# Copy everything else
COPY backend ./backend
COPY frontend ./frontend

WORKDIR /app

# Start both backend and frontend with concurrently (optional)
RUN npm install -g concurrently

CMD concurrently "cd backend && npm run start" "cd frontend && npm run dev"